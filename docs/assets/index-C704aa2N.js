var Ne=Object.defineProperty;var Me=(t,e,n)=>e in t?Ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var C=(t,e,n)=>Me(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function O(){}function ae(t){return t()}function ie(){return Object.create(null)}function K(t){t.forEach(ae)}function he(t){return typeof t=="function"}function pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ve(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function Ee(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t){return document.createTextNode(t)}function A(){return k(" ")}function me(){return k("")}function z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function W(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Le(t){return Array.from(t.childNodes)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function _e(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function fe(t,e,n){t.classList.toggle(e,!!n)}class Ae{constructor(e=!1){C(this,"is_svg",!1);C(this,"e");C(this,"n");C(this,"t");C(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=Ee(n.nodeName):this.e=y(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)T(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(v)}}let $;function G(t){$=t}const H=[],ce=[];let j=[];const ue=[],Te=Promise.resolve();let Y=!1;function Ce(){Y||(Y=!0,Te.then(ge))}function Z(t){j.push(t)}const X=new Set;let x=0;function ge(){if(x!==0)return;const t=$;do{try{for(;x<H.length;){const e=H[x];x++,G(e),Oe(e.$$)}}catch(e){throw H.length=0,x=0,e}for(G(null),H.length=0,x=0;ce.length;)ce.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];X.has(n)||(X.add(n),n())}j.length=0}while(H.length);for(;ue.length;)ue.pop()();Y=!1,X.clear(),G(t)}function Oe(t){if(t.fragment!==null){t.update(),K(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}function Be(t){const e=[],n=[];j.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),j=e}const J=new Set;let Ie;function be(t,e){t&&t.i&&(J.delete(t),t.i(e))}function Se(t,e,n,r){if(t&&t.o){if(J.has(t))return;J.add(t),Ie.c.push(()=>{J.delete(t)}),t.o(e)}}function xe(t){t&&t.c()}function ye(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),Z(()=>{const o=t.$$.on_mount.map(ae).filter(he);t.$$.on_destroy?t.$$.on_destroy.push(...o):K(o),t.$$.on_mount=[]}),l.forEach(Z)}function we(t,e){const n=t.$$;n.fragment!==null&&(Be(n.after_update),K(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function He(t,e){t.$$.dirty[0]===-1&&(H.push(t),Ce(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,r,l,o,s=null,_=[-1]){const f=$;G(t);const i=t.$$={fragment:null,ctx:[],props:o,update:O,not_equal:l,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:ie(),dirty:_,skip_bound:!1,root:e.target||f.$$.root};s&&s(i.root);let b=!1;if(i.ctx=n?n(t,e.props||{},(a,m,...E)=>{const B=E.length?E[0]:m;return i.ctx&&l(i.ctx[a],i.ctx[a]=B)&&(!i.skip_bound&&i.bound[a]&&i.bound[a](B),b&&He(t,a)),m}):[],i.update(),b=!0,K(i.before_update),i.fragment=r?r(i.ctx):!1,e.target){if(e.hydrate){const a=Le(e.target);i.fragment&&i.fragment.l(a),a.forEach(v)}else i.fragment&&i.fragment.c();e.intro&&be(t.$$.fragment),ye(t,e.target,e.anchor),ge()}G(f)}class ke{constructor(){C(this,"$$");C(this,"$$set")}$destroy(){we(this,1),this.$destroy=O}$on(e,n){if(!he(n))return O;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!ve(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const je="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(je);function De(t){let e;return{c(){e=k("ここにファイルをドラッグ＆ドロップ")},m(n,r){T(n,e,r)},p:O,d(n){n&&v(e)}}}function Fe(t){let e,n;return{c(){e=new Ae(!1),n=me(),e.a=n},m(r,l){e.m(t[4],r,l),T(r,n,l)},p(r,l){l&16&&e.p(r[4])},d(r){r&&(v(n),e.d())}}}function de(t){let e;function n(o,s){return o[1]?Ge:ze}let r=n(t),l=r(t);return{c(){l.c(),e=me()},m(o,s){l.m(o,s),T(o,e,s)},p(o,s){r===(r=n(o))&&l?l.p(o,s):(l.d(1),l=r(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&v(e),l.d(o)}}}function ze(t){let e,n,r;return{c(){e=y("button"),e.textContent="中身を表示"},m(l,o){T(l,e,o),n||(r=z(e,"click",t[14]),n=!0)},p:O,d(l){l&&v(e),n=!1,r()}}}function Ge(t){let e,n,r,l,o;return{c(){e=y("button"),e.textContent="閉じる（軽くなるかも？）",n=A(),r=y("p"),_e(r,"font-family","'Courier New', Consolas, monospace, Inter, system-ui, Avenir, Helvetica, Arial, sans-serif")},m(s,_){T(s,e,_),T(s,n,_),T(s,r,_),r.innerHTML=t[3],l||(o=z(e,"click",t[13]),l=!0)},p(s,_){_&8&&(r.innerHTML=s[3])},d(s){s&&(v(e),v(n),v(r)),l=!1,o()}}}function Ke(t){var re,le;let e,n,r=(t[5]||"")+"",l,o,s=(t[6]||"")+"",_,f,i=(t[7]||"")+"",b,a,m=(t[5]!==t[9].PBM&&t[8]||"")+"",E,B,N,R,P,V,D=(((re=t[2])==null?void 0:re.name)||"---")+"",q,h,u=(((le=t[2])==null?void 0:le.size)/1024).toFixed(2)+"",g,d,I,ee,F,Q,te;function ne(p,M){return p[4]?Fe:De}let U=ne(t),L=U(t),w=t[3]&&de(t);return{c(){e=y("body"),n=y("p"),l=k(r),o=A(),_=k(s),f=A(),b=k(i),a=A(),E=k(m),B=A(),N=y("div"),L.c(),R=A(),P=y("div"),V=k("ファイル名："),q=k(D),h=k("，サイズ："),g=k(u),d=k(` KB
    `),I=y("br"),ee=k(`【ファイルの中身】
    `),F=y("div"),w&&w.c(),W(n,"class","img-info svelte-1dklv5c"),W(N,"class","drop-area svelte-1dklv5c"),fe(N,"hover",t[0]),_e(F,"padding-left","20px"),W(P,"class","file-info svelte-1dklv5c")},m(p,M){T(p,e,M),c(e,n),c(n,l),c(n,o),c(n,_),c(n,f),c(n,b),c(n,a),c(n,E),c(e,B),c(e,N),L.m(N,null),c(e,R),c(e,P),c(P,V),c(P,q),c(P,h),c(P,g),c(P,d),c(P,I),c(P,ee),c(P,F),w&&w.m(F,null),Q||(te=[z(N,"dragover",t[10]),z(N,"dragleave",t[11]),z(N,"drop",t[12])],Q=!0)},p(p,[M]){var oe,se;M&32&&r!==(r=(p[5]||"")+"")&&S(l,r),M&64&&s!==(s=(p[6]||"")+"")&&S(_,s),M&128&&i!==(i=(p[7]||"")+"")&&S(b,i),M&288&&m!==(m=(p[5]!==p[9].PBM&&p[8]||"")+"")&&S(E,m),U===(U=ne(p))&&L?L.p(p,M):(L.d(1),L=U(p),L&&(L.c(),L.m(N,null))),M&1&&fe(N,"hover",p[0]),M&4&&D!==(D=(((oe=p[2])==null?void 0:oe.name)||"---")+"")&&S(q,D),M&4&&u!==(u=(((se=p[2])==null?void 0:se.size)/1024).toFixed(2)+"")&&S(g,u),p[3]?w?w.p(p,M):(w=de(p),w.c(),w.m(F,null)):w&&(w.d(1),w=null)},i:O,o:O,d(p){p&&v(e),L.d(),w&&w.d(),Q=!1,K(te)}}}function Re(t,e,n){const r={PBM:"P1",PGM:"P2",PPM:"P3"};let l=!1,o=!1,s,_,f,i,b,a,m;function E(h){let u=[],g=3;if(h[3].length>1)for(let d=3;d<h.length;++d)u.push.apply(u,h[d].split(""));else u=h;n(4,f="<table border='0' style='border-collapse:collapse; border-color:red'>");for(let d=0;d<a;++d){n(4,f+="<tr>");for(let I=0;I<b;++I)n(4,f+=`<td style='width:1px; height:1px; padding:0; background: rgb(${(u[g]-1)*-255}, ${(u[g]-1)*-255}, ${(u[g]-1)*-255})'></td>`),g++;n(4,f+="</tr>")}n(4,f+="</table>")}function B(h){let u=4;n(4,f="<table border='0' style='border-collapse:collapse; border-color:red'>");for(let g=0;g<a;++g){n(4,f+="<tr>");for(let d=0;d<b;++d)n(4,f+=`<td style='width:1px; height:1px; padding:0; background: rgb(${h[u]}, ${h[u]}, ${h[u]})'></td>`),u++;n(4,f+="</tr>")}n(4,f+="</table>")}function N(h){let u=4;n(4,f="<table border='0' style='border-collapse:collapse; border-color:red'>");for(let g=0;g<a;++g){n(4,f+="<tr>");for(let d=0;d<b;++d)n(4,f+=`<td style='width:1px; height:1px; padding:0; background: rgb(${h[u]}, ${h[u+1]}, ${h[u+2]})'></td>`),u+=3;n(4,f+="</tr>")}n(4,f+="</table>")}function R(h){h.preventDefault(),n(0,l=!0)}function P(h){n(0,l=!1)}function V(h){if(h.preventDefault(),n(0,l=!1),n(4,f="処理中..."),n(2,s=h.dataTransfer.files[0]),s){const u=new FileReader;u.readAsText(s),u.onload=g=>{let d=g.target.result.toString().replaceAll(/\#.*?(\n|\r)/g,"").split(/\s/).filter(I=>I!="");n(3,_=g.target.result.toString().replaceAll(`
`,"<br>")),n(5,i=d[0]),n(6,b=parseInt(d[1])),n(7,a=parseInt(d[2])),i!==r.PBM&&n(8,m=parseInt(d[3])),i===r.PBM?E(d):i===r.PGM?B(d):i===r.PPM?N(d):n(4,f="マジックナンバーが不正です。")}}else n(4,f="ファイルをアップロードしてください。")}return[l,o,s,_,f,i,b,a,m,r,R,P,V,()=>{n(1,o=!1)},()=>{n(1,o=!0)}]}class Ve extends ke{constructor(e){super(),Pe(this,e,Re,Ke,pe,{})}}function qe(t){let e,n,r,l,o,s,_,f,i,b,a;return s=new Ve({}),{c(){e=y("main"),n=y("h1"),n.textContent="PNMビューワー",r=A(),l=y("hr"),o=A(),xe(s.$$.fragment),_=A(),f=y("hr"),i=A(),b=y("p"),b.innerHTML=`PNMファイルの仕様（本家）は，<a href="https://netpbm.sourceforge.net/doc/index.html">https://netpbm.sourceforge.net/doc/index.html</a>。<br/>
    英語を読みたくないよ！って方は，<a href="https://coskxlabsite.stars.ne.jp/html/for_students/PNM/pnmfiles.html">https://coskxlabsite.stars.ne.jp/html/for_students/PNM/pnmfiles.html</a>
    がおすすめです。<br/><br/>
    現在，ファイルが「ASCIIタイプ（P1〜P3）でデータが正常」という範囲で正常に動作します（仕様違反検知等は開発中です）。`},m(m,E){T(m,e,E),c(e,n),c(e,r),c(e,l),c(e,o),ye(s,e,null),c(e,_),c(e,f),c(e,i),c(e,b),a=!0},p:O,i(m){a||(be(s.$$.fragment,m),a=!0)},o(m){Se(s.$$.fragment,m),a=!1},d(m){m&&v(e),we(s)}}}class Ue extends ke{constructor(e){super(),Pe(this,e,null,qe,pe,{})}}new Ue({target:document.getElementById("app")});
